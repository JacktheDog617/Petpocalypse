package collegecatnip.petpocalypse.backend;
/**
 * Manage the saving of PlayerData to and from json
 * @author Madison Ridore
 * Date Created: 11/18/2024
 * 
 * @author Jaime Lee
 * Last Modified: 12/4/2024
 * Patch Notes:
 *      Implementing Android context to get filesDir
 */

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonSyntaxException;
import com.google.gson.reflect.TypeToken;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Random;
import android.content.Context;

public class PlayerSave {
    private static final String catsJson = "[{\"type\":\"Cat\",\"petID\":1,\"pettionaryID\":1,\"breed\":\"American Shorthair - Tuxedo\",\"name\":\"Boots\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Generally considered an easygoing, gentle creature, this cat can easily get up to no good.\",\"secret\":\"The tuxedo is really just his secret identity.\"},{\"type\":\"Cat\",\"petID\":2,\"pettionaryID\":2,\"breed\":\"American Shorthair - Silver Tabby\",\"name\":\"Sushi\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Descended from European breeds they have taken over America\",\"secret\":\"Beware the tiny paws, for they tread the path of pandemonium. A flick of her tail, and your favorite mug is now a casualty.\"},{\"type\":\"Cat\",\"petID\":3,\"pettionaryID\":3,\"breed\":\"American Shorthair - Orange\",\"name\":\"Houdini\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Your orange flavored child is really a little terror, but we love him anyway.\",\"secret\":\"Sometimes they all run on one collective brain cell.\"},{\"type\":\"Cat\",\"petID\":4,\"pettionaryID\":4,\"breed\":\"Maine Coon\",\"name\":\"Newt\",\"level\":1,\"size\":3,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"It is the state cat of Maine, USA.\",\"secret\":\"This large, majestic feline is a gentle giant. They are very friendly and intelligent.\"},{\"type\":\"Cat\",\"petID\":5,\"pettionaryID\":5,\"breed\":\"Persian\",\"name\":\"Bella\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"As one of the oldest cat breeds, they have been traced all the way back to the 1600s.\",\"secret\":\"They aren’t lazing about, they are secretly plotting world domination, and they always succeed (at least in their head).\"},{\"type\":\"Cat\",\"petID\":6,\"pettionaryID\":6,\"breed\":\"Russian Blue\",\"name\":\"Lucy\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Their aloof nature makes them enigmatic guardians, which is how they got their alternate name of Archangel Cats.\",\"secret\":\"Glimmering in the moonlight, this elusive cat prowls with grace, troublesome thoughts filtering through their head, trouble meant for you.\"},{\"type\":\"Cat\",\"petID\":7,\"pettionaryID\":7,\"breed\":\"Siamese\",\"name\":\"Chi Chi\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"These very vocal cats originate from Thialand, but the breed has mostly developed from breeding programs in the West.\",\"secret\":\"These cats have an awful tendency to blame their mischief on the dog.\"},{\"type\":\"Cat\",\"petID\":8,\"pettionaryID\":8,\"breed\":\"Munchkin\",\"name\":\"Buddy\",\"level\":1,\"size\":1,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"These stubby little guys were first introduced to the world in 1991.\",\"secret\":\"They represent the lollipop guild!\"},{\"type\":\"Cat\",\"petID\":9,\"pettionaryID\":9,\"breed\":\"Scottish Fold\",\"name\":\"Barley\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"When this breed was discovered the original barn cat was named Susie.\",\"secret\":\"These cats are known for their folded ears that make them go deaf to the screams of their enemies.\"},{\"type\":\"Cat\",\"petID\":10,\"pettionaryID\":10,\"breed\":\"Sphynx\",\"name\":\"Checkers\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"These cats actually originate from Canada.\",\"secret\":\"Don’t let their fur like appearance deceive you, they have a very short covering of hair that feels like peaches. They can also get sunburned.\"},{\"type\":\"Cat\",\"petID\":11,\"pettionaryID\":11,\"breed\":\"Thai\",\"name\":\"Bean\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"The origin of Siamese cats, these came first. They are slightly larger and more muscular than their Siamese counterparts.\",\"secret\":\"They are considered to be the traditional breed of Thailand.\"},{\"type\":\"Cat\",\"petID\":12,\"pettionaryID\":12,\"breed\":\"Ukrainian Levkoy\",\"name\":\"Ace\",\"level\":1,\"size\":1,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"This is a man-made breed from Ukraine, it’s a mix of sphynx and Scottish fold.\",\"secret\":\"No shelf is safe, no paper towel roll left intact. She’s not just a cat. She’s a tiny anarchist, a fuzzy harbinger of mayhem.\"},{\"type\":\"Cat\",\"petID\":13,\"pettionaryID\":13,\"breed\":\"Lykoi\",\"name\":\"Jake\",\"level\":1,\"size\":2,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"Contrary to popular belief this werewolf started in the US.\",\"secret\":\"This little critter isn’t really a werewolf, but he sure has the appearance of. Don’t worry though they are a lot more friendly than your typical werewolf.\"},{\"type\":\"Cat\",\"petID\":14,\"pettionaryID\":14,\"breed\":\"Norwegian Forest\",\"name\":\"Leo\",\"level\":1,\"size\":3,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"With another name of Skogkatt, It's the national cat breed of Norway.\",\"secret\":\"This floofy long haired cat has escaped from the forests of Norway and into our hearts and homes to get up to no good.\"},{\"type\":\"Cat\",\"petID\":15,\"pettionaryID\":15,\"breed\":\"Selkirk Rex\",\"name\":\"Wiz\",\"level\":1,\"size\":3,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"This ball of fluff cat doesn’t shed much due to its wavy coat.\",\"secret\":\"They want you to know that they’re not fat, they’re fluffy.\"},{\"type\":\"Cat\",\"petID\":16,\"pettionaryID\":16,\"breed\":\"Bread cat\",\"name\":\"Bread cat\",\"level\":1,\"size\":3,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Sometimes the cat is a loaf of bread, sometimes the cat wears the bread, it’s all circumstantial.\",\"secret\":\"She’ll nap on your fresh baguette, claim your toaster as her throne, and chew through the crust of your peace and quiet like it’s a baguette stick.\"},{\"type\":\"Cat\",\"petID\":17,\"pettionaryID\":17,\"breed\":\"TacoCat\",\"name\":\"TacoCat\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Taco cat spelled backwards is Taco cat\",\"secret\":\"Behold, Taco Cat—the spicy, chaotic fusion of feline and fiesta!\"},{\"type\":\"Cat\",\"petID\":18,\"pettionaryID\":18,\"breed\":\"Plastic Bag @ 2am\",\"name\":\"Plastic\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"I don’t always chew on plastic bags, but when I do, I make sure the bag is in your room and you’re sleeping.\",\"secret\":\" No bag is safe. No sleep is sacred. As you lie helplessly in bed, the ominous sound of relentless chewing fills the silence.\"},{\"type\":\"Cat\",\"petID\":19,\"pettionaryID\":19,\"breed\":\"Keyboard Cat\",\"name\":\"Ctrl\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Dun Dun Dun Do Do Dun\",\"secret\":\"With a majestic stretch and a contented purr, this fluffy saboteur settles upon your precious keys, oblivious to your desperate attempts to finish a single sentence.\"},{\"type\":\"Cat\",\"petID\":20,\"pettionaryID\":20,\"breed\":\"Slipper Pope Cat\",\"name\":\"Francis\",\"level\":1,\"size\":4,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"We shall pay tribute to the Great Cat with Fish\",\"secret\":\"Cloaked in the finest of fuzzy slippers and crowned with an air of divine mischief, this fluffy pontiff is on a mission to bless your household with pure pandemonium.\"},{\"type\":\"Cat\",\"petID\":21,\"pettionaryID\":21,\"breed\":\"Domestic AJ\",\"name\":\"AJ\",\"level\":1,\"size\":2,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"This little guy screamed and got in the way of every step of this game.\",\"secret\":\"This furry tyrant believes that the finer things in life—like houseplants and your last nerve—are there for one purpose: to be chewed, knocked over, and loudly announced to the world.\"},{\"type\":\"Cat\",\"petID\":22,\"pettionaryID\":22,\"breed\":\"Domestic Noodles\",\"name\":\"Noodles\",\"level\":1,\"size\":3,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"Sometimes he’s a cat, other times he’s a limp noodle.\",\"secret\":\"Bow before his noodly chaos, as he brings you live and dead rodents.\"},{\"type\":\"Cat\",\"petID\":23,\"pettionaryID\":23,\"breed\":\"Domestic Marley\",\"name\":\"Marley\",\"level\":1,\"size\":3,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"Puts the 'scared' in scaredy cat.\",\"secret\":\"He was birthed by a porch on a random October eve\"}]";
    private static String fileName = "playerdata.json";
    private static Context context;

    // saves for demonstration
    private static final String newSave = "{\"name\":\"Player\",\"user_id\":0,\"love\":0,\"treats\":0,\"player_logoff\":\"2024-12-07T14:45:29.335277600\",\"petsOwned\":[{\"type\":\"Cat\",\"petID\":1,\"pettionaryID\":1,\"breed\":\"American Shorthair - Tuxedo\",\"name\":\"Boots\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":true,\"flavor\":\"Generally considered an easygoing, gentle creature, this cat can easily get up to no good.\",\"secret\":\"The tuxedo is really just his secret identity.\"},{\"type\":\"Cat\",\"petID\":2,\"pettionaryID\":2,\"breed\":\"American Shorthair - Silver Tabby\",\"name\":\"Sushi\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Descended from European breeds they have taken over America\",\"secret\":\"Beware the tiny paws, for they tread the path of pandemonium. A flick of her tail, and your favorite mug is now a casualty.\"},{\"type\":\"Cat\",\"petID\":3,\"pettionaryID\":3,\"breed\":\"American Shorthair - Orange\",\"name\":\"Houdini\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Your orange flavored child is really a little terror, but we love him anyway.\",\"secret\":\"Sometimes they all run on one collective brain cell.\"},{\"type\":\"Cat\",\"petID\":4,\"pettionaryID\":4,\"breed\":\"Maine Coon\",\"name\":\"Newt\",\"level\":1,\"size\":3,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"It is the state cat of Maine, USA.\",\"secret\":\"This large, majestic feline is a gentle giant. They are very friendly and intelligent.\"},{\"type\":\"Cat\",\"petID\":5,\"pettionaryID\":5,\"breed\":\"Persian\",\"name\":\"Bella\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"As one of the oldest cat breeds, they have been traced all the way back to the 1600s.\",\"secret\":\"They aren’t lazing about, they are secretly plotting world domination, and they always succeed (at least in their head).\"},{\"type\":\"Cat\",\"petID\":6,\"pettionaryID\":6,\"breed\":\"Russian Blue\",\"name\":\"Lucy\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Their aloof nature makes them enigmatic guardians, which is how they got their alternate name of Archangel Cats.\",\"secret\":\"Glimmering in the moonlight, this elusive cat prowls with grace, troublesome thoughts filtering through their head, trouble meant for you.\"},{\"type\":\"Cat\",\"petID\":7,\"pettionaryID\":7,\"breed\":\"Siamese\",\"name\":\"Chi Chi\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"These very vocal cats originate from Thialand, but the breed has mostly developed from breeding programs in the West.\",\"secret\":\"These cats have an awful tendency to blame their mischief on the dog.\"},{\"type\":\"Cat\",\"petID\":8,\"pettionaryID\":8,\"breed\":\"Munchkin\",\"name\":\"Buddy\",\"level\":1,\"size\":1,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"These stubby little guys were first introduced to the world in 1991.\",\"secret\":\"They represent the lollipop guild!\"},{\"type\":\"Cat\",\"petID\":9,\"pettionaryID\":9,\"breed\":\"Scottish Fold\",\"name\":\"Barley\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"When this breed was discovered the original barn cat was named Susie.\",\"secret\":\"These cats are known for their folded ears that make them go deaf to the screams of their enemies.\"},{\"type\":\"Cat\",\"petID\":10,\"pettionaryID\":10,\"breed\":\"Sphynx\",\"name\":\"Checkers\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"These cats actually originate from Canada.\",\"secret\":\"Don’t let their fur like appearance deceive you, they have a very short covering of hair that feels like peaches. They can also get sunburned.\"},{\"type\":\"Cat\",\"petID\":11,\"pettionaryID\":11,\"breed\":\"Thai\",\"name\":\"Bean\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"The origin of Siamese cats, these came first. They are slightly larger and more muscular than their Siamese counterparts.\",\"secret\":\"They are considered to be the traditional breed of Thailand.\"},{\"type\":\"Cat\",\"petID\":12,\"pettionaryID\":12,\"breed\":\"Ukrainian Levkoy\",\"name\":\"Ace\",\"level\":1,\"size\":1,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"This is a man-made breed from Ukraine, it’s a mix of sphynx and Scottish fold.\",\"secret\":\"No shelf is safe, no paper towel roll left intact. She’s not just a cat. She’s a tiny anarchist, a fuzzy harbinger of mayhem.\"},{\"type\":\"Cat\",\"petID\":13,\"pettionaryID\":13,\"breed\":\"Lykoi\",\"name\":\"Jake\",\"level\":1,\"size\":2,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"Contrary to popular belief this werewolf started in the US.\",\"secret\":\"This little critter isn’t really a werewolf, but he sure has the appearance of. Don’t worry though they are a lot more friendly than your typical werewolf.\"},{\"type\":\"Cat\",\"petID\":14,\"pettionaryID\":14,\"breed\":\"Norwegian Forest\",\"name\":\"Leo\",\"level\":1,\"size\":3,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"With another name of Skogkatt, It's the national cat breed of Norway.\",\"secret\":\"This floofy long haired cat has escaped from the forests of Norway and into our hearts and homes to get up to no good.\"},{\"type\":\"Cat\",\"petID\":15,\"pettionaryID\":15,\"breed\":\"Selkirk Rex\",\"name\":\"Wiz\",\"level\":1,\"size\":3,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"This ball of fluff cat doesn’t shed much due to its wavy coat.\",\"secret\":\"They want you to know that they’re not fat, they’re fluffy.\"},{\"type\":\"Cat\",\"petID\":16,\"pettionaryID\":16,\"breed\":\"Bread cat\",\"name\":\"Bread cat\",\"level\":1,\"size\":3,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Sometimes the cat is a loaf of bread, sometimes the cat wears the bread, it’s all circumstantial.\",\"secret\":\"She’ll nap on your fresh baguette, claim your toaster as her throne, and chew through the crust of your peace and quiet like it’s a baguette stick.\"},{\"type\":\"Cat\",\"petID\":17,\"pettionaryID\":17,\"breed\":\"TacoCat\",\"name\":\"TacoCat\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Taco cat spelled backwards is Taco cat\",\"secret\":\"Behold, Taco Cat—the spicy, chaotic fusion of feline and fiesta!\"},{\"type\":\"Cat\",\"petID\":18,\"pettionaryID\":18,\"breed\":\"Plastic Bag @ 2am\",\"name\":\"Plastic\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"I don’t always chew on plastic bags, but when I do, I make sure the bag is in your room and you’re sleeping.\",\"secret\":\" No bag is safe. No sleep is sacred. As you lie helplessly in bed, the ominous sound of relentless chewing fills the silence.\"},{\"type\":\"Cat\",\"petID\":19,\"pettionaryID\":19,\"breed\":\"Keyboard Cat\",\"name\":\"Ctrl\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Dun Dun Dun Do Do Dun\",\"secret\":\"With a majestic stretch and a contented purr, this fluffy saboteur settles upon your precious keys, oblivious to your desperate attempts to finish a single sentence.\"},{\"type\":\"Cat\",\"petID\":20,\"pettionaryID\":20,\"breed\":\"Slipper Pope Cat\",\"name\":\"Francis\",\"level\":1,\"size\":4,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"We shall pay tribute to the Great Cat with Fish\",\"secret\":\"Cloaked in the finest of fuzzy slippers and crowned with an air of divine mischief, this fluffy pontiff is on a mission to bless your household with pure pandemonium.\"},{\"type\":\"Cat\",\"petID\":21,\"pettionaryID\":21,\"breed\":\"Domestic AJ\",\"name\":\"AJ\",\"level\":1,\"size\":2,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"This little guy screamed and got in the way of every step of this game.\",\"secret\":\"This furry tyrant believes that the finer things in life—like houseplants and your last nerve—are there for one purpose: to be chewed, knocked over, and loudly announced to the world.\"},{\"type\":\"Cat\",\"petID\":22,\"pettionaryID\":22,\"breed\":\"Domestic Noodles\",\"name\":\"Noodles\",\"level\":1,\"size\":3,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"Sometimes he’s a cat, other times he’s a limp noodle.\",\"secret\":\"Bow before his noodly chaos, as he brings you live and dead rodents.\"},{\"type\":\"Cat\",\"petID\":23,\"pettionaryID\":23,\"breed\":\"Domestic Marley\",\"name\":\"Marley\",\"level\":1,\"size\":3,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"Puts the 'scared' in scaredy cat.\",\"secret\":\"He was birthed by a porch on a random October eve\"}],\"multipliers\":\"[[0.0, 0.5, 0.0], [1.0, 0.5, 0.0], [2.0, 0.5, 0.0], [3.0, 0.5, 0.0], [4.0, 0.5, 0.0], [5.0, 0.5, 0.0]]\"}";
    private static final String partialSave = "{\"name\":\"Player\",\"user_id\":1,\"love\":55735442,\"treats\":11,\"player_logoff\":\"2024-12-07T14:17:29.715179700\",\"petsOwned\":[{\"type\":\"Cat\",\"petID\":1,\"pettionaryID\":1,\"breed\":\"American Shorthair - Tuxedo\",\"name\":\"Boots\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":24,\"owned\":true,\"flavor\":\"Generally considered an easygoing, gentle creature, this cat can easily get up to no good.\",\"secret\":\"The tuxedo is really just his secret identity.\"},{\"type\":\"Cat\",\"petID\":2,\"pettionaryID\":2,\"breed\":\"American Shorthair - Silver Tabby\",\"name\":\"Sushi\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":true,\"flavor\":\"Descended from European breeds they have taken over America\",\"secret\":\"Beware the tiny paws, for they tread the path of pandemonium. A flick of her tail, and your favorite mug is now a casualty.\"},{\"type\":\"Cat\",\"petID\":3,\"pettionaryID\":3,\"breed\":\"American Shorthair - Orange\",\"name\":\"Houdini\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Your orange flavored child is really a little terror, but we love him anyway.\",\"secret\":\"Sometimes they all run on one collective brain cell.\"},{\"type\":\"Cat\",\"petID\":4,\"pettionaryID\":4,\"breed\":\"Maine Coon\",\"name\":\"Newt\",\"level\":1,\"size\":3,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"It is the state cat of Maine, USA.\",\"secret\":\"This large, majestic feline is a gentle giant. They are very friendly and intelligent.\"},{\"type\":\"Cat\",\"petID\":5,\"pettionaryID\":5,\"breed\":\"Persian\",\"name\":\"Bella\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":13,\"owned\":true,\"flavor\":\"As one of the oldest cat breeds, they have been traced all the way back to the 1600s.\",\"secret\":\"They aren’t lazing about, they are secretly plotting world domination, and they always succeed (at least in their head).\"},{\"type\":\"Cat\",\"petID\":6,\"pettionaryID\":6,\"breed\":\"Russian Blue\",\"name\":\"Lucy\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"Their aloof nature makes them enigmatic guardians, which is how they got their alternate name of Archangel Cats.\",\"secret\":\"Glimmering in the moonlight, this elusive cat prowls with grace, troublesome thoughts filtering through their head, trouble meant for you.\"},{\"type\":\"Cat\",\"petID\":7,\"pettionaryID\":7,\"breed\":\"Siamese\",\"name\":\"Chi Chi\",\"level\":1,\"size\":2,\"rarity\":1,\"duplicates\":0,\"owned\":false,\"flavor\":\"These very vocal cats originate from Thialand, but the breed has mostly developed from breeding programs in the West.\",\"secret\":\"These cats have an awful tendency to blame their mischief on the dog.\"},{\"type\":\"Cat\",\"petID\":8,\"pettionaryID\":8,\"breed\":\"Munchkin\",\"name\":\"Buddy\",\"level\":1,\"size\":1,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"These stubby little guys were first introduced to the world in 1991.\",\"secret\":\"They represent the lollipop guild!\"},{\"type\":\"Cat\",\"petID\":9,\"pettionaryID\":9,\"breed\":\"Scottish Fold\",\"name\":\"Barley\",\"level\":2,\"size\":2,\"rarity\":2,\"duplicates\":21,\"owned\":true,\"flavor\":\"When this breed was discovered the original barn cat was named Susie.\",\"secret\":\"These cats are known for their folded ears that make them go deaf to the screams of their enemies.\"},{\"type\":\"Cat\",\"petID\":10,\"pettionaryID\":10,\"breed\":\"Sphynx\",\"name\":\"Checkers\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"These cats actually originate from Canada.\",\"secret\":\"Don’t let their fur like appearance deceive you, they have a very short covering of hair that feels like peaches. They can also get sunburned.\"},{\"type\":\"Cat\",\"petID\":11,\"pettionaryID\":11,\"breed\":\"Thai\",\"name\":\"Bean\",\"level\":1,\"size\":2,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"The origin of Siamese cats, these came first. They are slightly larger and more muscular than their Siamese counterparts.\",\"secret\":\"They are considered to be the traditional breed of Thailand.\"},{\"type\":\"Cat\",\"petID\":12,\"pettionaryID\":12,\"breed\":\"Ukrainian Levkoy\",\"name\":\"Ace\",\"level\":1,\"size\":1,\"rarity\":2,\"duplicates\":0,\"owned\":false,\"flavor\":\"This is a man-made breed from Ukraine, it’s a mix of sphynx and Scottish fold.\",\"secret\":\"No shelf is safe, no paper towel roll left intact. She’s not just a cat. She’s a tiny anarchist, a fuzzy harbinger of mayhem.\"},{\"type\":\"Cat\",\"petID\":13,\"pettionaryID\":13,\"breed\":\"Lykoi\",\"name\":\"Jake\",\"level\":1,\"size\":2,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"Contrary to popular belief this werewolf started in the US.\",\"secret\":\"This little critter isn’t really a werewolf, but he sure has the appearance of. Don’t worry though they are a lot more friendly than your typical werewolf.\"},{\"type\":\"Cat\",\"petID\":14,\"pettionaryID\":14,\"breed\":\"Norwegian Forest\",\"name\":\"Leo\",\"level\":1,\"size\":3,\"rarity\":3,\"duplicates\":0,\"owned\":false,\"flavor\":\"With another name of Skogkatt, It's the national cat breed of Norway.\",\"secret\":\"This floofy long haired cat has escaped from the forests of Norway and into our hearts and homes to get up to no good.\"},{\"type\":\"Cat\",\"petID\":15,\"pettionaryID\":15,\"breed\":\"Selkirk Rex\",\"name\":\"Wiz\",\"level\":4,\"size\":3,\"rarity\":3,\"duplicates\":10,\"owned\":true,\"flavor\":\"This ball of fluff cat doesn’t shed much due to its wavy coat.\",\"secret\":\"They want you to know that they’re not fat, they’re fluffy.\"},{\"type\":\"Cat\",\"petID\":16,\"pettionaryID\":16,\"breed\":\"Bread cat\",\"name\":\"Bread cat\",\"level\":1,\"size\":3,\"rarity\":4,\"duplicates\":1,\"owned\":true,\"flavor\":\"Sometimes the cat is a loaf of bread, sometimes the cat wears the bread, it’s all circumstantial.\",\"secret\":\"She’ll nap on your fresh baguette, claim your toaster as her throne, and chew through the crust of your peace and quiet like it’s a baguette stick.\"},{\"type\":\"Cat\",\"petID\":17,\"pettionaryID\":17,\"breed\":\"TacoCat\",\"name\":\"TacoCat\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Taco cat spelled backwards is Taco cat\",\"secret\":\"Behold, Taco Cat—the spicy, chaotic fusion of feline and fiesta!\"},{\"type\":\"Cat\",\"petID\":18,\"pettionaryID\":18,\"breed\":\"Plastic Bag @ 2am\",\"name\":\"Plastic\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"I don’t always chew on plastic bags, but when I do, I make sure the bag is in your room and you’re sleeping.\",\"secret\":\" No bag is safe. No sleep is sacred. As you lie helplessly in bed, the ominous sound of relentless chewing fills the silence.\"},{\"type\":\"Cat\",\"petID\":19,\"pettionaryID\":19,\"breed\":\"Keyboard Cat\",\"name\":\"Ctrl\",\"level\":1,\"size\":1,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"Dun Dun Dun Do Do Dun\",\"secret\":\"With a majestic stretch and a contented purr, this fluffy saboteur settles upon your precious keys, oblivious to your desperate attempts to finish a single sentence.\"},{\"type\":\"Cat\",\"petID\":20,\"pettionaryID\":20,\"breed\":\"Slipper Pope Cat\",\"name\":\"Francis\",\"level\":1,\"size\":4,\"rarity\":4,\"duplicates\":0,\"owned\":false,\"flavor\":\"We shall pay tribute to the Great Cat with Fish\",\"secret\":\"Cloaked in the finest of fuzzy slippers and crowned with an air of divine mischief, this fluffy pontiff is on a mission to bless your household with pure pandemonium.\"},{\"type\":\"Cat\",\"petID\":21,\"pettionaryID\":21,\"breed\":\"Domestic AJ\",\"name\":\"AJ\",\"level\":3,\"size\":2,\"rarity\":5,\"duplicates\":2,\"owned\":true,\"flavor\":\"This little guy screamed and got in the way of every step of this game.\",\"secret\":\"This furry tyrant believes that the finer things in life—like houseplants and your last nerve—are there for one purpose: to be chewed, knocked over, and loudly announced to the world.\"},{\"type\":\"Cat\",\"petID\":22,\"pettionaryID\":22,\"breed\":\"Domestic Noodles\",\"name\":\"Noodles\",\"level\":1,\"size\":3,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"Sometimes he’s a cat, other times he’s a limp noodle.\",\"secret\":\"Bow before his noodly chaos, as he brings you live and dead rodents.\"},{\"type\":\"Cat\",\"petID\":23,\"pettionaryID\":23,\"breed\":\"Domestic Marley\",\"name\":\"Marley\",\"level\":1,\"size\":3,\"rarity\":5,\"duplicates\":0,\"owned\":false,\"flavor\":\"Puts the 'scared' in scaredy cat.\",\"secret\":\"He was birthed by a porch on a random October eve\"}],\"multipliers\":\"[[0.0, 0.5, 0.0], [1.0, 0.5, 1.0], [2.0, 0.5, 0.0], [3.0, 0.5, 0.0], [4.0, 0.5, 1.0], [5.0, 0.5, 0.0]]\"}";
    private static final String fullSave = "{\"name\":\"Player\",\"user_id\":2,\"love\":87267746274699890,\"treats\":11,\"player_logoff\":\"2024-12-07T14:17:29.715179700\",\"petsOwned\":[{\"type\":\"Cat\",\"petID\":1,\"pettionaryID\":1,\"breed\":\"American Shorthair - Tuxedo\",\"name\":\"Boots\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":100,\"owned\":true,\"flavor\":\"Generally considered an easygoing, gentle creature, this cat can easily get up to no good.\",\"secret\":\"The tuxedo is really just his secret identity.\"},{\"type\":\"Cat\",\"petID\":2,\"pettionaryID\":2,\"breed\":\"American Shorthair - Silver Tabby\",\"name\":\"Sushi\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":100,\"owned\":true,\"flavor\":\"Descended from European breeds they have taken over America\",\"secret\":\"Beware the tiny paws, for they tread the path of pandemonium. A flick of her tail, and your favorite mug is now a casualty.\"},{\"type\":\"Cat\",\"petID\":3,\"pettionaryID\":3,\"breed\":\"American Shorthair - Orange\",\"name\":\"Houdini\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":100,\"owned\":true,\"flavor\":\"Your orange flavored child is really a little terror, but we love him anyway.\",\"secret\":\"Sometimes they all run on one collective brain cell.\"},{\"type\":\"Cat\",\"petID\":4,\"pettionaryID\":4,\"breed\":\"Maine Coon\",\"name\":\"Newt\",\"level\":5,\"size\":3,\"rarity\":1,\"duplicates\":100,\"owned\":true,\"flavor\":\"It is the state cat of Maine, USA.\",\"secret\":\"This large, majestic feline is a gentle giant. They are very friendly and intelligent.\"},{\"type\":\"Cat\",\"petID\":5,\"pettionaryID\":5,\"breed\":\"Persian\",\"name\":\"Bella\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":100,\"owned\":true,\"flavor\":\"As one of the oldest cat breeds, they have been traced all the way back to the 1600s.\",\"secret\":\"They aren’t lazing about, they are secretly plotting world domination, and they always succeed (at least in their head).\"},{\"type\":\"Cat\",\"petID\":6,\"pettionaryID\":6,\"breed\":\"Russian Blue\",\"name\":\"Lucy\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":100,\"owned\":true,\"flavor\":\"Their aloof nature makes them enigmatic guardians, which is how they got their alternate name of Archangel Cats.\",\"secret\":\"Glimmering in the moonlight, this elusive cat prowls with grace, troublesome thoughts filtering through their head, trouble meant for you.\"},{\"type\":\"Cat\",\"petID\":7,\"pettionaryID\":7,\"breed\":\"Siamese\",\"name\":\"Chi Chi\",\"level\":5,\"size\":2,\"rarity\":1,\"duplicates\":100,\"owned\":true,\"flavor\":\"These very vocal cats originate from Thialand, but the breed has mostly developed from breeding programs in the West.\",\"secret\":\"These cats have an awful tendency to blame their mischief on the dog.\"},{\"type\":\"Cat\",\"petID\":8,\"pettionaryID\":8,\"breed\":\"Munchkin\",\"name\":\"Buddy\",\"level\":5,\"size\":1,\"rarity\":2,\"duplicates\":50,\"owned\":true,\"flavor\":\"These stubby little guys were first introduced to the world in 1991.\",\"secret\":\"They represent the lollipop guild!\"},{\"type\":\"Cat\",\"petID\":9,\"pettionaryID\":9,\"breed\":\"Scottish Fold\",\"name\":\"Barley\",\"level\":5,\"size\":2,\"rarity\":2,\"duplicates\":50,\"owned\":true,\"flavor\":\"When this breed was discovered the original barn cat was named Susie.\",\"secret\":\"These cats are known for their folded ears that make them go deaf to the screams of their enemies.\"},{\"type\":\"Cat\",\"petID\":10,\"pettionaryID\":10,\"breed\":\"Sphynx\",\"name\":\"Checkers\",\"level\":5,\"size\":2,\"rarity\":2,\"duplicates\":50,\"owned\":true,\"flavor\":\"These cats actually originate from Canada.\",\"secret\":\"Don’t let their fur like appearance deceive you, they have a very short covering of hair that feels like peaches. They can also get sunburned.\"},{\"type\":\"Cat\",\"petID\":11,\"pettionaryID\":11,\"breed\":\"Thai\",\"name\":\"Bean\",\"level\":5,\"size\":2,\"rarity\":2,\"duplicates\":50,\"owned\":true,\"flavor\":\"The origin of Siamese cats, these came first. They are slightly larger and more muscular than their Siamese counterparts.\",\"secret\":\"They are considered to be the traditional breed of Thailand.\"},{\"type\":\"Cat\",\"petID\":12,\"pettionaryID\":12,\"breed\":\"Ukrainian Levkoy\",\"name\":\"Ace\",\"level\":5,\"size\":1,\"rarity\":2,\"duplicates\":50,\"owned\":true,\"flavor\":\"This is a man-made breed from Ukraine, it’s a mix of sphynx and Scottish fold.\",\"secret\":\"No shelf is safe, no paper towel roll left intact. She’s not just a cat. She’s a tiny anarchist, a fuzzy harbinger of mayhem.\"},{\"type\":\"Cat\",\"petID\":13,\"pettionaryID\":13,\"breed\":\"Lykoi\",\"name\":\"Jake\",\"level\":5,\"size\":2,\"rarity\":3,\"duplicates\":40,\"owned\":true,\"flavor\":\"Contrary to popular belief this werewolf started in the US.\",\"secret\":\"This little critter isn’t really a werewolf, but he sure has the appearance of. Don’t worry though they are a lot more friendly than your typical werewolf.\"},{\"type\":\"Cat\",\"petID\":14,\"pettionaryID\":14,\"breed\":\"Norwegian Forest\",\"name\":\"Leo\",\"level\":5,\"size\":3,\"rarity\":3,\"duplicates\":40,\"owned\":true,\"flavor\":\"With another name of Skogkatt, It's the national cat breed of Norway.\",\"secret\":\"This floofy long haired cat has escaped from the forests of Norway and into our hearts and homes to get up to no good.\"},{\"type\":\"Cat\",\"petID\":15,\"pettionaryID\":15,\"breed\":\"Selkirk Rex\",\"name\":\"Wiz\",\"level\":5,\"size\":3,\"rarity\":3,\"duplicates\":40,\"owned\":true,\"flavor\":\"This ball of fluff cat doesn’t shed much due to its wavy coat.\",\"secret\":\"They want you to know that they’re not fat, they’re fluffy.\"},{\"type\":\"Cat\",\"petID\":16,\"pettionaryID\":16,\"breed\":\"Bread cat\",\"name\":\"Bread cat\",\"level\":5,\"size\":3,\"rarity\":4,\"duplicates\":30,\"owned\":true,\"flavor\":\"Sometimes the cat is a loaf of bread, sometimes the cat wears the bread, it’s all circumstantial.\",\"secret\":\"She’ll nap on your fresh baguette, claim your toaster as her throne, and chew through the crust of your peace and quiet like it’s a baguette stick.\"},{\"type\":\"Cat\",\"petID\":17,\"pettionaryID\":17,\"breed\":\"TacoCat\",\"name\":\"TacoCat\",\"level\":5,\"size\":1,\"rarity\":4,\"duplicates\":30,\"owned\":true,\"flavor\":\"Taco cat spelled backwards is Taco cat\",\"secret\":\"Behold, Taco Cat—the spicy, chaotic fusion of feline and fiesta!\"},{\"type\":\"Cat\",\"petID\":18,\"pettionaryID\":18,\"breed\":\"Plastic Bag @ 2am\",\"name\":\"Plastic\",\"level\":5,\"size\":1,\"rarity\":4,\"duplicates\":30,\"owned\":true,\"flavor\":\"I don’t always chew on plastic bags, but when I do, I make sure the bag is in your room and you’re sleeping.\",\"secret\":\" No bag is safe. No sleep is sacred. As you lie helplessly in bed, the ominous sound of relentless chewing fills the silence.\"},{\"type\":\"Cat\",\"petID\":19,\"pettionaryID\":19,\"breed\":\"Keyboard Cat\",\"name\":\"Ctrl\",\"level\":5,\"size\":1,\"rarity\":4,\"duplicates\":30,\"owned\":true,\"flavor\":\"Dun Dun Dun Do Do Dun\",\"secret\":\"With a majestic stretch and a contented purr, this fluffy saboteur settles upon your precious keys, oblivious to your desperate attempts to finish a single sentence.\"},{\"type\":\"Cat\",\"petID\":20,\"pettionaryID\":20,\"breed\":\"Slipper Pope Cat\",\"name\":\"Francis\",\"level\":5,\"size\":4,\"rarity\":4,\"duplicates\":30,\"owned\":true,\"flavor\":\"We shall pay tribute to the Great Cat with Fish\",\"secret\":\"Cloaked in the finest of fuzzy slippers and crowned with an air of divine mischief, this fluffy pontiff is on a mission to bless your household with pure pandemonium.\"},{\"type\":\"Cat\",\"petID\":21,\"pettionaryID\":21,\"breed\":\"Domestic AJ\",\"name\":\"AJ\",\"level\":5,\"size\":2,\"rarity\":5,\"duplicates\":15,\"owned\":true,\"flavor\":\"This little guy screamed and got in the way of every step of this game.\",\"secret\":\"This furry tyrant believes that the finer things in life—like houseplants and your last nerve—are there for one purpose: to be chewed, knocked over, and loudly announced to the world.\"},{\"type\":\"Cat\",\"petID\":22,\"pettionaryID\":22,\"breed\":\"Domestic Noodles\",\"name\":\"Noodles\",\"level\":5,\"size\":3,\"rarity\":5,\"duplicates\":15,\"owned\":true,\"flavor\":\"Sometimes he’s a cat, other times he’s a limp noodle.\",\"secret\":\"Bow before his noodly chaos, as he brings you live and dead rodents.\"},{\"type\":\"Cat\",\"petID\":23,\"pettionaryID\":23,\"breed\":\"Domestic Marley\",\"name\":\"Marley\",\"level\":5,\"size\":3,\"rarity\":5,\"duplicates\":15,\"owned\":true,\"flavor\":\"Puts the 'scared' in scaredy cat.\",\"secret\":\"He was birthed by a porch on a random October eve\"}],\"multipliers\":\"[[0.0, 0.5, 1.0], [1.0, 0.5, 1.0], [2.0, 0.5, 1.0], [3.0, 0.5, 1.0], [4.0, 0.5, 1.0], [5.0, 0.5, 1.0]]\"}";


    private static final Gson petGson = new GsonBuilder().registerTypeAdapter(new TypeToken<ArrayList<Pet>>(){}.getType(), new PetTypeAdapter()).setPrettyPrinting().create();

    // for demonstration purposes only
    public PlayerSave(Context context, int presave)
    {
        this.context = context;
        loadPlayerData(presave);
    }

    public PlayerSave(Context context)
    {
        this.context = context;
        File json = new File(this.context.getFilesDir(), fileName);
        if(!json.exists())
        {
            try
            {
                if(json.createNewFile())
                {
                    newPlayerData(loadCatsFromJson());
                }
            }
            catch(IOException e)
            {
                e.printStackTrace();
                System.exit(0);
            }
        }
    }
    
    private ArrayList<Pet> loadCatsFromJson()
    {
        // uncomment to use a file isntead of a string
        /*
        try (FileReader reader = new FileReader(catsJson)){
            ArrayList<Pet> pets = petGson.fromJson(catsJson, new TypeToken<ArrayList<Pet>>(){}.getType());
            return pets;
        } catch (IOException e) {
            System.err.println("Error loading cats from JSON: " + e.getMessage());
        }catch (JsonSyntaxException e) {
            System.err.println("Error parsing JSON: " + e.getMessage());
        }
        return null;
         */
        try {
            ArrayList<Pet> pets = petGson.fromJson(catsJson, new TypeToken<ArrayList<Pet>>(){}.getType());
            System.out.println("Loaded " + pets.size() + " pets from JSON");
            return pets;
        }catch (JsonSyntaxException e) {
            System.err.println("Error parsing JSON: " + e.getMessage());
        }
        return null;
    }
    
    public static void newPlayerData(ArrayList<Pet> loadedPets)
    {
        // make new player
        PlayerData newPlayer = new PlayerData(loadedPets);
        newPlayer.printInfo();
        // give player random pet to start with
        Random rand = new Random();
        int defaultPet = rand.nextInt(3) + 1;
        // give a random default pet with ID 1,2, or 3
        // for Cats this would be either the Tuxedo, Silver Tabby, or Orange domestic
        newPlayer.givePet(defaultPet);
        
        // make new json save
        try (FileWriter writer = new FileWriter(fileName)) {
            Gson gson = new GsonBuilder()
                    .registerTypeAdapter(PlayerData.class, new PlayerTypeAdapter(petGson))
                    .setPrettyPrinting()
                    .create();
            gson.toJson(newPlayer, writer);
        } catch (IOException e) {
            System.err.println("Error saving player data: " + e.getMessage());
        }
    }
    
    // Save PlayerData to a JSON file
    public static void savePlayerData(PlayerData playerData) {
        try (FileWriter writer = new FileWriter(fileName)) {
            Gson gson = new GsonBuilder()
                    .registerTypeAdapter(PlayerData.class, new PlayerTypeAdapter(petGson))
                    .setPrettyPrinting()
                    .create();
            gson.toJson(playerData, writer);
        } catch (IOException e) {
            System.err.println("Error saving player data: " + e.getMessage());
        }
    }
    
    // Load PlayerData from a JSON file
    public static PlayerData loadPlayerData() {
        try (FileReader reader = new FileReader(fileName)) {
            Gson gson = new GsonBuilder()
                    .registerTypeAdapter(PlayerData.class, new PlayerTypeAdapter(petGson))
                    .setPrettyPrinting()
                    .create();
            return gson.fromJson(reader, PlayerData.class);
        } catch (IOException e) {
            System.err.println("Error loading player data: " + e.getMessage());
            return null;
        }
    }

    // Save loader for demonstration
    public static PlayerData loadPlayerData(int saveNum) {
        String json = null;

        if(saveNum == 1)
            json = newSave;
        else if(saveNum == 2)
            json = partialSave;
        else if(saveNum == 3)
            json = fullSave;

        try {
            Gson gson = new GsonBuilder()
                    .registerTypeAdapter(PlayerData.class, new PlayerTypeAdapter(petGson))
                    .setPrettyPrinting()
                    .create();
            System.out.println("I am supposed to be loading the premade saves but I am dumb and broken. Bite Me");
            PlayerData playerData = gson.fromJson(json, PlayerData.class);
            playerData.printInfo();
            return playerData;
        }catch (JsonSyntaxException e) {
            System.err.println("Error parsing preload JSON: " + e.getMessage());
            return null;
        }
    }
}